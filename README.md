# Solution-to-alpha-campus-junior-hackathon-Team-
| Этап                          | Суть действий                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Ключевые функции / блоки                     |
| ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------- |
| **0. Задание путей и импорт** | Подключаем `pandas`, `numpy`, `catboost`, sklearn-утилиты и задаём пути к файлам в каталоге `/kaggle/input/alfaaaa`. При желании можно переключиться на CPU, указав `GPU_ID = ''`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | заголовок, переменные `ROOT`, `TRAIN_PATH` … |
| **1. Инженерия признаков**    | <br>**`build_features()`**  — заполняет `start_cluster`, добавляет «вес текущего кластера», считает число пропусков и диапазоны для групп \*\_avg/\_max/\_min.<br><br>**`add_trend_features()`** — для каждого клиента и каждого числового признака вычисляет:<br>  • `_delta` = last – first;<br>  • `_ratio` = last / first;<br>  • `_slope` — линейный тренд по месяцам.                                                                                                                                                                                                                                                                                                                                            | блок **1 Feature engineering**               |
| **2. Метрика**                | Функция **`weighted_auc`** считает взвешенный ROC-AUC: отдельно AUC для каждого из 17 классов, затем усредняет с весами из `cluster_weights.xlsx`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | блок **2 Metric helper**                     |
| **3. Pipeline**               | 1. **Загрузка** train/test и словаря весов кластеров.<br>2. **Импутация чисел**: для каждой колонки берём медиану внутри `start_cluster` (fallback — глобальная).<br>3. **Генерация признаков**: базовые + тренды.<br>4. **Категориальные**: пропуски → `__miss__`.<br>5. **LabelEncoder** для `end_cluster`.<br>6. **CatBoost** – параметры (2000 итераций, depth 9, LR ≈0.053, GPU).<br>7. **3-fold OOF**: обучаем три модели, собираем out-of-fold предсказания и усредняем прогноз для test.<br>8. **Оценка**: выводим взвешенный ROC-AUC по OOF.<br>9. **Формирование submission**: берём шаблон `sample_submission.csv`, подменяем вероятности, заполняем недостающие кластеры нулями, сохраняем `answers1.csv`. | блоки **3.1 load → 3.7 submission**          |
| **4. Запуск**                 | При вызове скрипта (`python main.py`) выполняется `main()`.                                                                                                                                                                                                                                                                                                                                                                      
